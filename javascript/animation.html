<!DOCTYPE html>
<html lang="ja-jp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>アニメーション</title>
    <style>
        body{
            background-color: black;
            color: aliceblue;
        }
        a{
            color:aliceblue;
        }
        #canvasContainer{
            background-color: black;
        }
        #canvas2{
	    border:1px solid blue;
            background-color:black;
        }
        #lblCounter{
            background-color: orange;
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded',()=>{
            const rocket = new Image();
            const lblCounter = document.getElementById('lblCounter');
            let rocketX=0;
            let rocketY=0;
            console.log(lblCounter.textContent);
            function init(){
                rocket.src='img/UFO2.png';
                window.requestAnimationFrame(draw2);
            }
            function draw2(){
                let ctx2=document.getElementById('canvas2').getContext('2d');
                let time = new Date();
                ctx2.globalCompositeOperation='destination-over';
                ctx2.clearRect(0, 0, 300, 300);
                ctx2.fillStyle='rgba(0, 0, 255, 0.4)';
                ctx2.strokeStyle='rgba(0, 153, 255, 1)';
                ctx2.save();
                rocketX=Math.round(((time.getSeconds())%3)*100+(time.getMilliseconds()/1000)*100)-20;
                rocketY=Math.round(Math.sin(Math.PI/1.5*(time.getSeconds()%3+(time.getMilliseconds()/1000)))*130)+130;
                ctx2.translate(rocketX,rocketY);
                ctx2.drawImage(rocket,0,0,40,40);
                ctx2.restore();
                window.requestAnimationFrame(draw2);
                lblCounter.textContent=time.getSeconds()+'秒, rocketX:'+rocketX+', rocketY:'+rocketY;
            }
            init();
            
        })
    </script>
</head>
<body>
    <h1>アニメーション練習</h1>
    <div id="canvasContainer">
        <canvas id="canvas2" width="300" height="300"></canvas>
    </div>
    <div>
        counter:<div id="lblCounter">none</div>
    </div>
    <a href="/javascript/">Javasctipt</a>
</body>
</html>
